SELECT reservation.*, users.name AS user_name, cafe.name AS cafe_name, users.phone AS user_phone, cafe.contact_number AS cafe_phone, COUNT(*) OVER() AS total_count FROM reservation JOIN users ON reservation.users_id=users.id JOIN cafe ON reservation.cafe_id=cafe.id WHERE users.name ILIKE $1 OR users.phone ILIKE $1 OR cafe.name ILIKE $1 OR cafe.contact_number ILIKE $1 ORDER BY cafe.name ASC LIMIT $2 OFFSET $3 